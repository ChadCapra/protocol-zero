default:
    @just --list

# --- 1. BOOTSTRAP ---
setup:
    @echo "ðŸš€ Initializing UI Sovereignty..."
    npm install
    @echo "âœ… NPM modules installed."
    @echo "ðŸ‘‰ Now run: just proto"

# --- 2. CODEGEN ---
proto:
    @echo "ðŸ”® Generating TypeScript Contracts..."
    mkdir -p src/proto
    # FIX: Added --ts_proto_opt=esModuleInterop=true to fix 'require is not defined'
    protoc --plugin=./node_modules/.bin/protoc-gen-ts_proto \
           --ts_proto_out=./src/proto \
           --ts_proto_opt=esModuleInterop=true \
           --ts_proto_opt=forceLong=long \
           -I ../core/priv/proto \
           ../core/priv/proto/base.proto
    @echo "âœ… TypeScript definitions generated."

# --- 3. RUNTIME ---
dev:
    npm run dev

build:
    npm run build